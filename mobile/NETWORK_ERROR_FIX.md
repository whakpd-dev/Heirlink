# Network Error — что проверить

## 1. URL API

Приложение обращается к **http://5.129.198.32/api**

- В консоли Metro/Expo при запуске должно быть: `[HeirLink] API_BASE_URL: http://5.129.198.32/api`
- Если видишь другой URL — в папке `mobile` создай `.env`:
  ```
  EXPO_PUBLIC_API_URL=http://5.129.198.32
  ```
  и перезапусти `npm start` (сборка заново).

## 2. iOS и HTTP

**Expo Go на iOS** может блокировать незашифрованный HTTP (App Transport Security). Настройки из `app.json` применяются только в **своей сборке**, в Expo Go — нет.

Варианты:

- **Проверь на Android** (телефон или эмулятор) — там cleartext обычно разрешён.
- Либо собери **development build** (тогда подтянется наш ATS exception):
  ```bash
  npx expo prebuild
  npx expo run:ios
  ```

## 3. Сеть телефона

- Телефон должен иметь доступ в интернет (Wi‑Fi или мобильный интернет).
- Если только Wi‑Fi — убедись, что сеть не блокирует исходящие запросы (корпоративные/гостевые Wi‑Fi часто режут).

## 4. Что смотреть в логах

При запросе в консоли Metro будет что-то вроде:

- `[HeirLink] API Error: Network Error ... ECONNREFUSED` — сервер недоступен (не тот хост/порт или сервер не слушает).
- `[HeirLink] API Error: ... timeout` — таймаут (медленная сеть или сервер не отвечает).
- `[HeirLink] API Error: ... ENOTFOUND` — хост не резолвится (проверь URL и DNS).

По этому сообщению можно понять, на каком этапе ошибка.

## 5. Проверка сервера с телефона

В браузере на телефоне открой: **http://5.129.198.32/api**

Должна открыться строка вроде: `HeirLink API is running!`

Если страница не открывается — проблема в сети/доступе до сервера, не в приложении.
